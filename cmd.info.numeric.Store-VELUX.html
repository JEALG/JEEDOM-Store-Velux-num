<div style="width:98px; min-height:80px;" class="cmd #history# tooltips cmd-widget" data-type="info" data-subtype="numeric" data-cmd_id="#id#" data-cmd_uid="#uid#" data-version="#version#" title="#collectDate#">
    <!-- Info Widget
        Basé sur les widget de 	: jayce
        Mise à jour				: JAG 20190518 : Nettoyage du code
	-->
    <div class="title #hide_name#">
        <div class="cmdName">#name_display#</div>
    </div>
    <div class="content-sm ">
        <span class="iconCmd#id#"></span>
    </div>
    <div style="font-weight: bold;font-size : 10px;">
        <span class="timeCmd#id#" ></span>
    </div>
    <div class="value">
        <span class="value#id# timeCmd label label-default value"></span>
    </div>
    <!-- Historique -->
        <div class="cmdStats #hide_history#" style="#displayHistory# font-size : 10px;margin-top:0px;">
            <span title="Min" class="tooltips">#minHistoryValue##unite#</span>|<span title="Max" class="tooltips">#maxHistoryValue##unite#</span> <i class="#tendance#"></i>
        </div>
	<script>
		jeedom.cmd.update['#id#'] = function(_options){
			// Options de personnalisation avec valeur par defaut
				// Paramètre "sizehw" : à déclarer en pixels - 80 maxi
              				var srcImgHeight 	= (is_numeric('#sizeh#')) 	? parseFloat('#sizeh#') 	: 90;
              				var srcImgWidth		= (is_numeric('#sizew#')) 	? parseFloat('#sizew#') 	: 90;
        		// Affichage durée changement dernier etat
          					var srcImglogoTime = '#logoTime#';
        		// Paramétrage des images
              				var srcImgURL 		= 'plugins/widget/core/template/dashboard/cmd.info.numeric.Store-VELUX/';
              			// Paramètrage du logo		  	  
							var srcImglogo		= ('#logo#'!='#'+'logo#') ? "#logo#" : "Store-";
							var srcImglogo_T 	= ('#logo_type#'!='#'+'logo_type#') ? "#logo_type#" : "png";	
              			// Paramètrage du logo ERREUR		  	  
							var srcImglogoER	= ('#logo_error#'!='#'+'logo_error#') ? "#logo_error#" : "oups";
							var srcImglogoER_T 	= ('#logo_error_type#'!='#'+'logo_error_type#') ? "#logo_error_type#" : "png";	
                // Variable Image
                            var srcPictureID; 
            
            // Update
                var State = parseFloat(_options.display_value);	
                if (State == 0) {
                    srcPictureID = "0";
                } else if (State > 0 && State <= 35) {
                    srcPictureID = "10";
                } else if (State > 35 && State <= 45) {
                    srcPictureID = "20";
                } else if (State > 45 && State <= 55) {
                    srcPictureID = "30";
                } else if (State > 55 && State <= 63) {
                    srcPictureID = "40";
                } else if (State > 63 && State <= 73) {
                    srcPictureID = "50";
                } else if (State > 73 && State <= 84) {
                    srcPictureID = "60";
                } else if (State > 84 && State <= 92) {
                    srcPictureID = "70";
                } else if (State > 92 && State <= 95) {
                    srcPictureID = "80";
                } else if (State > 95 && State <= 100) {
                    srcPictureID = "99";
                } else {
                    srcPictureID = "error";
                }          
            // Update IMG + gestion erreur
                if (srcPictureID == "error"){
                    $('.cmd[data-cmd_uid=#uid#] .iconCmd#id#').html('<img src="'+srcImgURL +srcImglogoER +'.'+ srcImglogoER_T+'" style="height:' + srcImgHeight +'px;width:' + srcImgWidth +'px;">');
                } else {
                    $('.cmd[data-cmd_uid=#uid#] .iconCmd#id#').html('<img src="'+srcImgURL + srcImglogo+ +srcPictureID +'.'+ srcImglogo_T+'" style="height:' + srcImgHeight +'px;width:' + srcImgWidth +'px;">');
                }
                $('.cmd[data-cmd_uid=#uid#] .value#id#').empty().append(_options.display_value+' '+'#unite#');
          	
            // Derniere durée changement dernier etat //Merci @Salvialf pour le code
                if (srcImglogoTime == "duree") {
                    jeedom.cmd.displayDuration(_options.valueDate, $('.cmd[data-cmd_uid=#uid#] .timeCmd#id#'));
                } else if (srcImglogoTime == "date") {
                    var srcdate     = new Date(_options.valueDate);
                    var srcformat   = $.datepicker.formatDate('D dd/mm', srcdate);
                    var srctime     = "à "+srcdate.getHours()+":"+(srcdate.getMinutes()<10?'0':'')+srcdate.getMinutes();
                    $('.cmd[data-cmd_uid=#id#] .timeCmd#id#').empty().html(srcformat+'<br>'+srctime);
                } else if (srcImglogoTime == "heure") {
                    var srcdate     = new Date(_options.valueDate);
                    var srctime     = "à "+srcdate.getHours()+":"+(srcdate.getMinutes()<10?'0':'')+srcdate.getMinutes()+":"+(srcdate.getSeconds()<10?'0':'')+srcdate.getSeconds()+"";
                    $('.cmd[data-cmd_id=#uid#] .timeCmd#id#').empty().html(srctime);
                };
          }
      jeedom.cmd.update['#id#']({display_value:'#state#',valueDate:'#valueDate#',collectDate:'#collectDate#',alertLevel:'#alertLevel#'});
    </script>
</div>